(this["webpackJsonpflicr-api-project"]=this["webpackJsonpflicr-api-project"]||[]).push([[0],{107:function(t,e,a){},135:function(t,e,a){"use strict";a.r(e);var o=a(0),n=a.n(o),r=a(10),c=a.n(r),i=(a(107),a(55)),s=a.n(i),j=a(43),u=a(13),l=a(82),f=a.n(l),O=a(84),g=a.n(O),d=a(88),b=a.n(d),h=a(3),p=function(){return Object(h.jsxs)("div",{className:f.a.navBlock,children:[Object(h.jsx)(j.b,{to:"/find",children:Object(h.jsx)(g.a,{fontSize:"large"})}),Object(h.jsx)(j.b,{to:"/favor",children:Object(h.jsx)(b.a,{fontSize:"large"})})]})},v=a(40),m=a(23),P=a(173),x=a(180),E=a(66),I=a.n(E),_=a(90),S=a(25),R=a(7),C=a(91),T="fe6a01fa9267d89be3df137d31d4607c",F=a.n(C).a.create({baseURL:"https://api.flickr.com/services/rest/"}),y=function(t,e){return F.get("?method=flickr.photos.search",{params:{api_key:T,format:"json",page:e,per_page:20,text:t,nojsoncallback:!0,sort:"relevance"}}).then((function(t){return t.data}))},N="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-PHOTOS",A="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-PHOTOS-IS-GETTING-PROGRESS",L="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-SEARCH-NAME",k="FLICR-API-MY-Project/PHOTOS-REDUCER/ADD-TAG",D="FLICR-API-MY-Project/PHOTOS-REDUCER/DELETE-TAG",G="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-PAGE",w="FLICR-API-MY-Project/PHOTOS-REDUCER/SET_NEW_NAME",H="FLICR-API-MY-Project/PHOTOS-REDUCER/SET_NEW_ERROR",U={searchName:"",page:1,pages:0,perpage:0,total:"",photo:[],isGettingPhotosSuccess:!0,isGettingPhotosProgress:!1,newName:"",someError:""},J=function(t,e,a){return{type:N,photos:t,page:e,pages:a}},M=function(t){return{type:A,isGettingPhotosProgress:t}},Y=function(t){return{type:G,page:t}},B=function(t){return{type:H,err:t}},z=function(t,e){return function(){var a=Object(_.a)(I.a.mark((function a(o){var n;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(M(!0)),o(Y(e)),a.prev=2,a.next=5,y(t,e);case 5:"ok"===(n=a.sent).stat&&(o(J(n.photos.photo,n.photos.page,n.photos.pages)),o(B(""))),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),o(B("no connection"));case 12:o(M(!1));case 13:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(t){return a.apply(this,arguments)}}()},V=a(171),W=a(172),K="FLICR-API/FAVORITE-REDUCER/SET_F_PHOTO",Z="FLICR-API/FAVORITE-REDUCER/DELETE-F-PHOTO",q="FLICR-API/FAVORITE-REDUCER/ADD-TAG-TO-FAVORITE",X="FLICR-API/FAVORITE-REDUCER/DELETE-TAG-F-FAVORITE",Q=function(){var t={favorite:[]};try{for(var e=Object.keys(localStorage),a=e.length;a--;){var o=JSON.parse(localStorage.getItem(e[a])),n=e[a];t.favorite.push({favoritePhotoId:n,favoritePhoto:o})}}catch(r){console.log("The app can't get data from localeStorage")}return t}(),$=function(t,e){return function(a){a(function(t,e){return{type:K,favoritePhotoId:t,favoritePhoto:e}}(t,e));try{localStorage.setItem(t,JSON.stringify(e))}catch(o){console.log("image can't be added to LocaleStorage")}}},tt=function(t){return function(e){e({type:Z,id:t});try{localStorage.removeItem(t)}catch(a){console.log("image can't be deleted from LocaleStorage")}}},et=function(t,e){return function(a){a(function(t,e){return{type:q,id:t,tag:e}}(t,e));try{var o=JSON.parse(localStorage.getItem(t));o=Object(R.a)(Object(R.a)({},o),{},{tags:[].concat(Object(S.a)(o.tags),[e])}),localStorage.setItem(t,JSON.stringify(o))}catch(n){console.log("tag can't be added to LocaleStorageTS")}}},at=function(t,e){return function(a){a(function(t,e){return{type:X,id:t,tag:e}}(t,e));try{var o=JSON.parse(localStorage.getItem(t));o=Object(R.a)(Object(R.a)({},o),{},{tags:Object(S.a)(o.tags.filter((function(t){return t!==e?1:-1})))}),localStorage.setItem(t,JSON.stringify(o))}catch(n){console.log("tag can't be deleted from LocaleStorageTS")}}},ot=a(67),nt=a.n(ot),rt=function(t){var e=t.tags,a=t.photoId,o=Object(m.b)(),n=function(e){return function(){o(function(t,e){return{type:D,id:t,tag:e}}(a,e)),t.isFavorite&&o(at(a,e))}};return Object(h.jsx)("div",{className:nt.a.tags,children:e.map((function(t,e){return Object(h.jsxs)("div",{className:nt.a.singleTag,children:[Object(h.jsxs)("span",{children:[" ",t]}),Object(h.jsx)(V.a,{size:"small",onClick:n(t),children:Object(h.jsx)(W.a,{color:"primary"})})]},t+e)}))})},ct=a(47),it=a.n(ct),st=n.a.memo((function(t){var e=t.photo,a=e.farm,n=e.tags,r=e.id,c=e.secret,i=e.server,s=Object(m.b)(),j=Object(o.useState)(""),u=Object(v.a)(j,2),l=u[0],f=u[1],O=Object(o.useState)(""),g=Object(v.a)(O,2),d=g[0],b=g[1],p=function(){""!==l.trim()?(s(function(t,e){return{type:k,id:t,tag:e}}(r,l)),t.isFavorite&&s(et(r,l)),f("")):b("Please, add tag")},E="https://farm".concat(a,".staticflickr.com/").concat(i,"/").concat(r,"_").concat(c,".jpg)");return Object(h.jsxs)("div",{className:it.a.photoContainer,children:[Object(h.jsx)("img",{className:it.a.photoImage,src:E,alt:"img is loading :)"}),Object(h.jsx)("div",{className:it.a.button,children:Object(h.jsx)(P.a,{onClick:function(){t.isFavorite?s(tt(r)):s($(r,t.photo))},variant:"outlined",color:"primary",children:t.isFavorite?"Remove  It!":"Bookmark  it!"})}),Object(h.jsx)(rt,{tags:n,photoId:r,isFavorite:t.isFavorite}),Object(h.jsx)(x.a,{className:it.a.button,type:"text",value:l,label:"some tags?",onChange:function(t){t.currentTarget.value.length<16?(f(t.currentTarget.value),b("")):b("long tag")},onKeyPress:function(t){""!==d&&b(""),"Enter"===t.key&&p()},variant:"outlined",error:!!d,helperText:d})]})})),jt=a(174),ut=a(182),lt=a(175),ft=Object(jt.a)((function(t){return Object(ut.a)({root:{display:"flex","& > * + *":{margin:t.spacing(2)}}})})),Ot=function(){var t=ft();return Object(h.jsx)("div",{className:t.root,children:Object(h.jsx)(lt.a,{color:"secondary"})})},gt=a(181),dt=function(t){var e=t.pagesCount,a=t.currentPage,o=t.onPageChanged;return Object(h.jsx)(h.Fragment,{children:0===e?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)(gt.a,{count:e,page:a,onChange:function(t,e){o(e)},showFirstButton:!0,showLastButton:!0})})},bt=function(t,e){return null===e||void 0===e?void 0:e.favorite.some((function(e){return e.favoritePhotoId===t}))},ht=a(68),pt=a.n(ht),vt=a(176),mt=Object(jt.a)((function(t){return{container1:{display:"flex",width:"100%",flexGrow:1,margin:"auto"},item:{padding:t.spacing(2),xs:"12"},itemFlexGrow:{flexGrow:1,border:"1px solid red"}}}));function Pt(){var t=Object(m.c)((function(t){return t})),e=t.photos,a=t.favorite,n=Object(m.b)(),r=Object(o.useState)(e.newName),c=Object(v.a)(r,2),i=c[0],s=c[1],j=Object(o.useState)(t.photos.someError),u=Object(v.a)(j,2),l=u[0],f=u[1],O=mt();Object(o.useEffect)((function(){f(e.someError)}),[e.someError]);var g=function(){""!==i.trim()?(n(z(i,e.page)),n({type:w,name:i})):f("Please, add name to find image")};return e.isGettingPhotosProgress?Object(h.jsx)(Ot,{}):Object(h.jsxs)("div",{className:pt.a.findPageContainer,children:[Object(h.jsx)("div",{className:O.container1,children:Object(h.jsxs)(vt.a,{container:!0,children:[Object(h.jsx)(vt.a,{className:O.item,item:!0,xs:8,children:Object(h.jsx)(x.a,{type:"text",value:i,onChange:function(t){s(t.currentTarget.value),f("")},onKeyPress:function(t){""!==l&&f(""),"Enter"===t.key&&g()},variant:"outlined",placeholder:"Print your search",error:""!==l,helperText:l,fullWidth:!0,size:"medium"})}),Object(h.jsx)(vt.a,{className:O.item,item:!0,xs:4,children:Object(h.jsx)(P.a,{onClick:g,variant:"outlined",color:"primary",size:"large",children:"FIND"})})]})}),!e.isGettingPhotosSuccess&&Object(h.jsx)("div",{children:"No image here. Would you like to find anything else?"}),Object(h.jsx)(dt,{currentPage:e.page,pagesCount:e.pages>200?200:e.pages,onPageChanged:function(t){n(z(i,t))}}),Object(h.jsx)("div",{className:pt.a.photos,children:e.photo.map((function(t){return Object(h.jsx)(st,{photo:t,isFavorite:bt(t.id,a)},t.id)}))})]})}var xt=a(69),Et=a.n(xt),It=function(){var t=Object(m.c)((function(t){return t.favorite}));return Object(h.jsx)("div",{className:Et.a.favoritePageContainer,children:Object(h.jsx)("div",{className:Et.a.photos,children:t.favorite.map((function(e){return Object(h.jsx)(st,{photo:e.favoritePhoto,isFavorite:bt(e.favoritePhotoId,t)},e.favoritePhotoId)}))})})},_t=a(93),St=a.n(_t),Rt=a(92),Ct=a.n(Rt),Tt=a(177),Ft=a(178),yt=function(){return Object(h.jsx)(Tt.a,{position:"static",style:{background:"#30ADD2"},children:Object(h.jsxs)(Ft.a,{style:{display:"flex",justifyContent:"space-between",width:"100%",paddingLeft:"30px"},children:[Object(h.jsx)("div",{className:Ct.a.title,children:Object(h.jsx)("h1",{children:"IMAGE FINDER"})}),Object(h.jsx)(St.a,{fontSize:"large"})]})})},Nt=a(179),At=a(94),Lt=a.n(At),kt=function(){return Object(h.jsx)("div",{style:{width:"100%"},children:Object(h.jsx)(Tt.a,{position:"static",color:"transparent",children:Object(h.jsx)(Nt.a,{maxWidth:"xl",children:Object(h.jsx)("div",{className:Lt.a.me,children:"  \xa9 2021 Nikolai Berestevich"})})})})},Dt=a(95),Gt=a(38),wt=Object(Gt.c)({photos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N:return Object(R.a)(Object(R.a)({},t),{},{page:e.page,pages:e.pages,photo:e.photos.map((function(t){return Object(R.a)(Object(R.a)({},t),{},{tags:[]})})),isGettingPhotosSuccess:0!==e.photos.length});case A:return Object(R.a)(Object(R.a)({},t),{},{isGettingPhotosProgress:e.isGettingPhotosProgress});case L:return Object(R.a)(Object(R.a)({},t),{},{searchName:e.searchName});case k:return Object(R.a)(Object(R.a)({},t),{},{photo:t.photo.map((function(t){return t.id!==e.id||t.tags.includes(e.tag)?t:Object(R.a)(Object(R.a)({},t),{},{tags:[].concat(Object(S.a)(t.tags),[e.tag])})}))});case D:return Object(R.a)(Object(R.a)({},t),{},{photo:t.photo.map((function(t){if(t.id===e.id){var a=t.tags.indexOf(e.tag),o=Object(S.a)(t.tags);return a>-1&&o.splice(a,1),Object(R.a)(Object(R.a)({},t),{},{tags:o})}return t}))});case G:return Object(R.a)(Object(R.a)({},t),{},{page:e.page});case w:return Object(R.a)(Object(R.a)({},t),{},{newName:e.name});case H:return Object(R.a)(Object(R.a)({},t),{},{someError:e.err});default:return t}},favorite:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case K:return Object(R.a)(Object(R.a)({},t),{},{favorite:[].concat(Object(S.a)(t.favorite),[{favoritePhotoId:e.favoritePhotoId,favoritePhoto:e.favoritePhoto}])});case Z:return Object(R.a)(Object(R.a)({},t),{},{favorite:t.favorite.filter((function(t){return t.favoritePhotoId!==e.id}))});case q:return Object(R.a)(Object(R.a)({},t),{},{favorite:t.favorite.map((function(t){return t.favoritePhotoId!==e.id?t:Object(R.a)(Object(R.a)({},t),{},{favoritePhoto:Object(R.a)(Object(R.a)({},t.favoritePhoto),{},{tags:t.favoritePhoto.tags.includes(e.tag)?Object(S.a)(t.favoritePhoto.tags):[].concat(Object(S.a)(t.favoritePhoto.tags),[e.tag])})})}))});case X:return Object(R.a)(Object(R.a)({},t),{},{favorite:t.favorite.map((function(t){return t.favoritePhotoId!==e.id?t:Object(R.a)(Object(R.a)({},t),{},{favoritePhoto:Object(R.a)(Object(R.a)({},t.favoritePhoto),{},{tags:Object(S.a)(t.favoritePhoto.tags.filter((function(t){return t!==e.tag})))})})}))});default:return t}}}),Ht=Object(Gt.d)(wt,Object(Gt.a)(Dt.a)),Ut=function(){return Object(h.jsx)(j.a,{children:Object(h.jsx)(m.a,{store:Ht,children:Object(h.jsxs)("div",{className:s.a.app,children:[Object(h.jsx)(yt,{}),Object(h.jsxs)("div",{className:s.a.appHeader,children:[Object(h.jsxs)("div",{className:s.a.table,children:[Object(h.jsx)(p,{}),Object(h.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(h.jsx)(Pt,{})}}),Object(h.jsx)(u.a,{path:"/favor",render:function(){return Object(h.jsx)(It,{})}}),Object(h.jsx)(u.a,{path:"/find",render:function(){return Object(h.jsx)(Pt,{})}})]}),Object(h.jsx)(kt,{})]})]})})})},Jt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,183)).then((function(e){var a=e.getCLS,o=e.getFID,n=e.getFCP,r=e.getLCP,c=e.getTTFB;a(t),o(t),n(t),r(t),c(t)}))};c.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(Ut,{})}),document.getElementById("root")),Jt()},47:function(t,e,a){t.exports={photoContainer:"Photo_photoContainer__3S-0b",photoImage:"Photo_photoImage__2nPa4",searchZone:"Photo_searchZone__3LXgT",button:"Photo_button__ULexw"}},55:function(t,e,a){t.exports={app:"App_app__YqG96",appHeader:"App_appHeader__1FPdJ",table:"App_table__1GIjm"}},67:function(t,e,a){t.exports={tags:"Tags_tags__6KoVa"}},68:function(t,e,a){t.exports={findPageContainer:"FindPage_findPageContainer__3PzPY",input:"FindPage_input__hISiJ",photos:"FindPage_photos__1b8wT",button:"FindPage_button__2vJET"}},69:function(t,e,a){t.exports={favoritePageContainer:"FavofitesPage_favoritePageContainer__3kYsf",photos:"FavofitesPage_photos__1nR9J"}},82:function(t,e,a){t.exports={navBlock:"Navigation_navBlock__3BpM4"}},92:function(t,e,a){t.exports={title:"Header_title__2JbDC"}},94:function(t,e,a){t.exports={me:"Footer_me__CKNuz"}}},[[135,1,2]]]);
//# sourceMappingURL=main.597bbdce.chunk.js.map