(this["webpackJsonpflicr-api-project"]=this["webpackJsonpflicr-api-project"]||[]).push([[0],{127:function(t,e,a){"use strict";a.r(e);var o=a(0),r=a.n(o),n=a(9),c=a.n(n),i=(a(99),a(54)),s=a.n(i),u=a(13),j=a(34),l=a(57),O=a.n(l),f=a(79),g=a.n(f),b=a(83),d=a.n(b),h=a(3),p=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsx)(j.b,{className:O.a.navBlock,to:dt,children:Object(h.jsx)(g.a,{fontSize:"large"})})}),Object(h.jsx)("div",{children:Object(h.jsx)(j.b,{className:O.a.navBlock,to:ht,children:Object(h.jsx)(d.a,{fontSize:"large"})})})]})},v=a(41),P=a(20),x=a(164),m=a(168),I=a(61),E=a.n(I),S=a(85),R=a(23),T=a(7),y=a(86),F="fe6a01fa9267d89be3df137d31d4607c",_=a.n(y).a.create({baseURL:"https://api.flickr.com/services/rest/"}),C=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return _.get("?method=flickr.photos.search&format=json&nojsoncallback=true&sort=relevance&api_key=".concat(F,"&page=").concat(e,"&pages=").concat(a,"&per_page=20&&text=").concat(t)).then((function(t){return console.log(t.data),t.data}))},A="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-PHOTOS",k="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-PHOTOS-IS-GETTING-PROGRESS",N="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-SEARCH-NAME",L="FLICR-API-MY-Project/PHOTOS-REDUCER/ADD-TAG",D="FLICR-API-MY-Project/PHOTOS-REDUCER/DELETE-TAG",G="FLICR-API-MY-Project/PHOTOS-REDUCER/SET-PAGE",H={searchName:"",page:1,pages:0,perpage:0,total:"",photo:[],isGettingPhotosSuccess:!0,isGettingPhotosProgress:!1,gettingPhotosError:""},B=function(t,e,a){return{type:A,photos:t,page:e,pages:a}},J=function(t){return{type:k,isGettingPhotosProgress:t}},w=function(t){return{type:G,page:t}},U=function(t,e){return function(){var a=Object(S.a)(E.a.mark((function a(o){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(J(!0)),o(w(e)),a.next=4,C(t,e);case 4:"ok"===(r=a.sent).stat&&o(B(r.photos.photo,r.photos.page,r.photos.pages)),o(J(!1));case 7:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()},M=a(165),Y="FLICR-API/FAVORITE-REDUCER/SET_F_PHOTO",V="FLICR-API/FAVORITE-REDUCER/DELETE-F-PHOTO",z="FLICR-API/FAVORITE-REDUCER/ADD-TAG-TO-FAVORITE",K="FLICR-API/FAVORITE-REDUCER/DELETE-TAG-F-FAVORITE",q=function(){var t={favorite:[]};try{for(var e=Object.keys(localStorage),a=e.length;a--;){var o=JSON.parse(localStorage.getItem(e[a])),r=e[a];t.favorite.push({favoritePhotoId:r,favoritePhoto:o})}}catch(n){console.log("The app can't get data from localeStorage")}return t}(),W=function(t,e){return function(a){a(function(t,e){return{type:Y,favoritePhotoId:t,favoritePhoto:e}}(t,e));try{localStorage.setItem(t,JSON.stringify(e))}catch(o){console.log("image can't be added to LocaleStorage")}}},Q=function(t){return function(e){e({type:V,id:t});try{localStorage.removeItem(t)}catch(a){console.log("image can't be deleted from LocaleStorage")}}},X=function(t,e){return function(a){a(function(t,e){return{type:z,id:t,tag:e}}(t,e));try{var o=JSON.parse(localStorage.getItem(t));o=Object(T.a)(Object(T.a)({},o),{},{tags:[].concat(Object(R.a)(o.tags),[e])}),localStorage.setItem(t,JSON.stringify(o))}catch(r){console.log("tag can't be added to LocaleStorageTS")}}},Z=function(t,e){return function(a){console.log("dddds"),a(function(t,e){return{type:K,id:t,tag:e}}(t,e));try{var o=JSON.parse(localStorage.getItem(t));o=Object(T.a)(Object(T.a)({},o),{},{tags:Object(R.a)(o.tags.filter((function(t){return t!==e?1:-1})))}),localStorage.setItem(t,JSON.stringify(o))}catch(r){console.log("tag can't be deleted from LocaleStorageTS")}}},$=function(t){var e=t.tags,a=t.photoId,o=Object(P.b)(),r=function(e){return function(){o(function(t,e){return{type:D,id:t,tag:e}}(a,e)),t.isFavorite&&Z(a,e)}};return Object(h.jsx)("div",{children:e.map((function(t,e){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("span",{children:[" ",t]}),Object(h.jsx)(x.a,{size:"small",onClick:r(t),children:Object(h.jsx)(M.a,{color:"primary"})})]},t+e)}))})},tt=a(87),et=a.n(tt),at=function(t){var e=t.photo,a=e.farm,r=e.tags,n=e.id,c=e.secret,i=e.server,s=e.title,u=Object(P.b)(),j=Object(o.useState)(""),l=Object(v.a)(j,2),O=l[0],f=l[1],g=Object(o.useState)(""),b=Object(v.a)(g,2),d=b[0],p=b[1],I=function(){""!==O.trim()?(u(function(t,e){return{type:L,id:t,tag:e}}(n,O)),t.isFavorite&&u(X(n,O)),f("")):p("Please, add tag")},E="https://farm".concat(a,".staticflickr.com/").concat(i,"/").concat(n,"_").concat(c,".jpg)");return Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{className:et.a.photoImage,src:E,alt:"img is loading :)"}),Object(h.jsx)("div",{children:s}),Object(h.jsx)($,{tags:r,photoId:n,isFavorite:t.isFavorite}),Object(h.jsx)(x.a,{onClick:function(){!0===t.isFavorite?u(Q(n)):!1===t.isFavorite&&u(W(n,t.photo))},children:t.isFavorite?"Remove  It":"Bookmark  it!"}),Object(h.jsx)(m.a,{type:"text",value:O,label:"new tag",onChange:function(t){f(t.currentTarget.value),p(null)},onKeyPress:function(t){null!==d&&p(null),"Enter"===t.key&&I()},variant:"standard",error:!!d,helperText:d})]})},ot=a(166),rt=a(170),nt=a(167),ct=Object(ot.a)((function(t){return Object(rt.a)({root:{display:"flex","& > * + *":{margin:t.spacing(2)}}})})),it=function(){var t=ct();return Object(h.jsx)("div",{className:t.root,children:Object(h.jsx)(nt.a,{color:"secondary"})})},st=a(169),ut=function(t){var e=t.pagesCount,a=t.currentPage,o=t.onPageChanged;return Object(h.jsx)(h.Fragment,{children:0===e?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)(st.a,{count:e,page:a,onChange:function(t,e){o(e),console.log(e)},showFirstButton:!0,showLastButton:!0})})},jt=function(){var t=Object(P.c)((function(t){return t.photos})),e=Object(P.c)((function(t){return t.favorite})),a=Object(P.b)(),r=Object(o.useState)(""),n=Object(v.a)(r,2),c=n[0],i=n[1],s=Object(o.useState)(""),u=Object(v.a)(s,2),j=u[0],l=u[1],O=function(){""!==c.trim()?a(U(c,t.page)):l("Please, add name to find image")};if(t.isGettingPhotosProgress)return Object(h.jsx)(it,{});var f=function(t){try{if(e)return e.favorite.some((function(e){return e.favoritePhotoId===t}))}catch(a){return!1}};return Object(h.jsxs)("div",{children:[Object(h.jsx)(m.a,{type:"text",value:c,onChange:function(t){i(t.currentTarget.value),l(null)},onKeyPress:function(t){null!==j&&l(null),"Enter"===t.key&&O()},variant:"outlined",placeholder:"Print your search",error:!!j,helperText:j}),Object(h.jsx)(x.a,{onClick:O,children:"FIND"}),!t.isGettingPhotosSuccess&&Object(h.jsx)("div",{children:"No image here. Would you like to find anything else?"}),Object(h.jsx)(ut,{currentPage:t.page,pagesCount:t.pages,onPageChanged:function(t){a(U(c,t))}}),t.photo.map((function(t){return Object(h.jsx)(at,{photo:t,isFavorite:f(t.id)},t.id)}))]})},lt=a(47),Ot=a.n(lt);var ft=function(){return Object(h.jsxs)("div",{className:Ot.a.errorBlock,children:[Object(h.jsx)("div",{className:Ot.a.number,children:"404"}),Object(h.jsx)("div",{className:Ot.a.message,children:"Page not found!"}),Object(h.jsx)("div",{className:Ot.a.cat,children:"\u2014\u0e05/\u1420.\u032b .\u141f\\\u0e05\u2014"})]})},gt=function(){var t=Object(P.c)((function(t){return t.favorite}));function e(e){try{if(t)return t.favorite.some((function(t){return t.favoritePhotoId===e}))}catch(a){return!1}}return Object(h.jsx)("div",{children:t.favorite.map((function(t){return Object(h.jsx)(at,{photo:t.favoritePhoto,isFavorite:e(t.favoritePhotoId)},t.favoritePhotoId)}))})},bt=function(){return Object(h.jsx)("div",{children:"Header"})},dt="/find",ht="/favorites",pt=function(){return Object(h.jsx)("div",{className:s.a.app,children:Object(h.jsxs)("div",{className:s.a.appHeader,children:[Object(h.jsx)(bt,{}),Object(h.jsxs)("div",{className:s.a.table,children:[Object(h.jsx)(p,{}),Object(h.jsxs)(u.c,{children:[Object(h.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(h.jsx)(jt,{})}}),Object(h.jsx)(u.a,{exact:!0,path:ht,render:function(){return Object(h.jsx)(gt,{})}}),Object(h.jsx)(u.a,{exact:!0,path:dt,render:function(){return Object(h.jsx)(jt,{})}}),Object(h.jsx)(u.a,{render:function(){return Object(h.jsx)(ft,{})}})]})]})]})})},vt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,171)).then((function(e){var a=e.getCLS,o=e.getFID,r=e.getFCP,n=e.getLCP,c=e.getTTFB;a(t),o(t),r(t),n(t),c(t)}))},Pt=a(88),xt=a(39),mt=Object(xt.c)({photos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A:return Object(T.a)(Object(T.a)({},t),{},{page:e.page,pages:e.pages,photo:e.photos.map((function(t){return Object(T.a)(Object(T.a)({},t),{},{tags:[]})})),isGettingPhotosSuccess:0!==e.photos.length});case k:return Object(T.a)(Object(T.a)({},t),{},{isGettingPhotosProgress:e.isGettingPhotosProgress});case N:return Object(T.a)(Object(T.a)({},t),{},{searchName:e.searchName});case L:return Object(T.a)(Object(T.a)({},t),{},{photo:t.photo.map((function(t){return t.id!==e.id||t.tags.includes(e.tag)?t:Object(T.a)(Object(T.a)({},t),{},{tags:[].concat(Object(R.a)(t.tags),[e.tag])})}))});case D:return Object(T.a)(Object(T.a)({},t),{},{photo:t.photo.map((function(t){if(t.id===e.id){var a=t.tags.indexOf(e.tag,0),o=Object(R.a)(t.tags);return a>-1&&o.splice(a,1),Object(T.a)(Object(T.a)({},t),{},{tags:o})}return t}))});case G:return Object(T.a)(Object(T.a)({},t),{},{page:e.page});default:return t}},favorite:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Y:return Object(T.a)(Object(T.a)({},t),{},{favorite:[].concat(Object(R.a)(t.favorite),[{favoritePhotoId:e.favoritePhotoId,favoritePhoto:e.favoritePhoto}])});case V:return Object(T.a)(Object(T.a)({},t),{},{favorite:t.favorite.filter((function(t){return t.favoritePhotoId!==e.id}))});case z:return Object(T.a)(Object(T.a)({},t),{},{favorite:t.favorite.map((function(t){return t.favoritePhotoId!==e.id?t:Object(T.a)(Object(T.a)({},t),{},{favoritePhoto:Object(T.a)(Object(T.a)({},t.favoritePhoto),{},{tags:t.favoritePhoto.tags.includes(e.tag)?Object(R.a)(t.favoritePhoto.tags):[].concat(Object(R.a)(t.favoritePhoto.tags),[e.tag])})})}))});case K:return Object(T.a)(Object(T.a)({},t),{},{favorite:t.favorite.map((function(t){return t.favoritePhotoId!==e.id?t:Object(T.a)(Object(T.a)({},t),{},{favoritePhoto:Object(T.a)(Object(T.a)({},t.favoritePhoto),{},{tags:Object(R.a)(t.favoritePhoto.tags.filter((function(t){return t!==e.tag})))})})}))});default:return t}}}),It=Object(xt.d)(mt,Object(xt.a)(Pt.a));window.store=It,c.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(j.a,{children:Object(h.jsx)(P.a,{store:It,children:Object(h.jsx)(pt,{})})})}),document.getElementById("root")),vt()},47:function(t,e,a){t.exports={errorBlock:"Error404_errorBlock__1JP_z",number:"Error404_number__2zcL7",message:"Error404_message__3_s_r",cat:"Error404_cat__2_JJr"}},54:function(t,e,a){t.exports={app:"App_app__YqG96",appHeader:"App_appHeader__1FPdJ",table:"App_table__1GIjm"}},57:function(t,e,a){t.exports={navBlock:"Navigation_navBlock__3BpM4"}},87:function(t,e,a){t.exports={photoImage:"Photo_photoImage__2nPa4"}},99:function(t,e,a){}},[[127,1,2]]]);
//# sourceMappingURL=main.b957c01a.chunk.js.map